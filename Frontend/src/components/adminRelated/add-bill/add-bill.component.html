<nav class="wm-navbar">
  <div class="wm-container">
    <div class="brand">
      <div class="logo" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" class="bolt">
          <path d="M13 2L3 14h7l-1 8 10-12h-7l1-8z" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </div>
      <a href="/"><span class="brand-name">PowerEase Admin</span></a>
    </div>

    <ul class="nav-links">
      <li><a routerLink="/admin/home" style="color:#0EA5A4;">Dashboard</a></li>
      <li><a routerLink="/admin/add-customer">Add Customers</a></li>
      <li><a routerLink="/admin/manage-connection">Manage Connection</a></li>
      <li><a routerLink="/admin/complaints" style="color:red">View Complaints</a></li>
    </ul>
  </div>
</nav>

<div class="container mt-4">
  <h2 class="text-center mb-4">Add New Bill</h2>

  <form (ngSubmit)="addBill()" #billForm="ngForm" class="card p-4 shadow-sm">
    <!-- Customer ID -->
    <div class="form-group mb-3">
      <label for="consumerNumber" class="form-label">Consumer Number</label>
      <div class="d-flex">
        <input id="consumerNumber" type="text" class="form-control custom-input" name="consumerNumber" maxlength="13"
          minlength="13" pattern="^[1-9][0-9]{12}$" [(ngModel)]="bill.consumerNumber"
          placeholder="Enter 13-digit Consumer Number" required #consumerRef="ngModel" />
      </div>
      <small style="color:red" *ngIf="consumerRef.value && consumerRef.invalid && consumerRef.touched">
        Invalid consumer number</small>
    </div>

    <!-- Month -->
    <div class="form-group mb-3">
  <label for="billingMonth">Billing Month:</label>

  <input
    type="month"
    id="billingMonth"
    name="billingMonth"
    class="form-control"
    [(ngModel)]="bill.billingMonth"
    required
    [min]="minBillingMonth"
  />

  <!-- ERROR MESSAGE -->
  

  <!-- ERROR MESSAGE -->
  <div *ngIf="bill.billingMonth && bill.billingMonth < minBillingMonth" class="text-danger small mt-1">
    <small>Billing month cannot be older than 1 month from today.</small>
  </div>
</div>



    <!-- Due Date -->
    <div class="form-group mb-3">
      <label for="dueDate">Due Date:</label>
      <input type="date" id="dueDate" name="dueDate" class="form-control" [(ngModel)]="bill.dueDate" required />
    </div>

    <!-- Units -->
    <div class="form-group mb-3">
      <label for="units">Units Consumed:</label>
      <input type="number" id="unitsConsumed" name="unitsConsumed" class="form-control" [(ngModel)]="bill.unitsConsumed"
        placeholder="Enter number of units" required />
    </div>

    <!-- Amount -->
    <div class="form-group mb-3">
      <label for="pricePerUnit">Price Per Unit:</label>
      <select id="pricePerUnit" name="pricePerUnit" class="form-control" [(ngModel)]="bill.pricePerUnit" required>
        <option value="" disabled selected>Select Price</option>
        <option [value]="5">5.00 (Residential)</option>
        <option [value]="7">7.00 (Commercial)</option>
      </select>
    </div>

    <div class="text-center">
      <button class="btn btn-primary w-50" [disabled]="!billForm.form.valid">
        Add Bill
      </button>
    </div>
  </form>

</div>

<div *ngIf="successMessage" class="alert alert-success text-center top-alert mt-4">
  {{ successMessage }}
</div>

<div *ngIf="errorMessage" class="alert alert-danger text-center top-alert mt-4">
  {{ errorMessage }}
</div>