<nav class="wm-navbar">
  <div class="wm-container">
    <div class="brand">
      <div class="logo" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" class="bolt">
          <path d="M13 2L3 14h7l-1 8 10-12h-7l1-8z" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <a routerLink="/"><span class="brand-name">PowerEase</span></a>
    </div>

    <ul class="nav-links">
      <li><a routerLink="/customer/home" style="color:#0EA5A4;">Dashboard</a></li>
      <li><a routerLink="/customer/pay-bill">Pay Bills</a></li>
      <li><a routerLink="/customer/complaint-status">Search Complaint</a></li>
      <li><a routerLink="/customer/register-complaint" style="color:red">Register Complaint</a></li>
    </ul>
  </div>
</nav>

<div class="container mt-4">
  <h2 class="mb-3">Bill Summary</h2>

  <!-- Bills table -->
  <div *ngIf="selectedBills.length > 0; else noBills">
    <table class="table table-bordered table-hover">
      <thead class="table-primary">
        <tr>
          <th>#</th>
          <th>Bill Number</th>
          <th>Bill Period</th>
          <th>Bill Date</th>
          <th>Due Date</th>
          <th class="text-end">Payable Amount</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let b of selectedBills; index as i">
          <td>{{ i + 1 }}</td>
          <td>{{ b.billId }}</td>
          <td>{{ b.billingMonth | date:'MMM-yyyy' }}</td>
          <td>{{ b.generated_at | date:'dd-MMM-yyyy' }}</td>
          <td>{{ b.dueDate | date:'mediumDate' }}</td>
          <td class="text-end">{{ b.payableAmount | currency:'INR' }}</td>
          <td>
            <button class="btn btn-sm btn-outline-danger" (click)="removeBill(b.billId)">
              Remove
            </button>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <th colspan="5" class="text-end">Total</th>
          <th class="text-end">{{ totalAmount | currency:'INR' }}</th>
          <th></th>
        </tr>
      </tfoot>
    </table>
  </div>
  <button (click)="proceedToPay()" class="btn btn-success mt-3" [disabled]="selectedBills.length === 0">
    Proceed to Pay
  </button>

  <ng-template #noBills>
    <div class="alert alert-info mt-3">
      No bills selected. Go to
      <a class="ms-1" routerLink="/customer/view-bill">View Bills</a>
      to choose bills.
    </div>
  </ng-template>
</div>
